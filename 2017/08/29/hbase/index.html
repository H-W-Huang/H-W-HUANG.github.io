<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>HBase 简介 | HWHuang的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="什么是HBase​    HBase是一个分布式的、面向列的开源数据库，该技术来源于 Fay Chang 所撰写的Google论文“Bigtable：一个结构化数据的分布式存储系统”。就像Bigtable利用了Google文件系统（File System）所提供的分布式数据存储一样，HBase在Hadoop之上提供了类似于Bigtable的能力。HBase是Apache的Hadoop项目的子项目。">
<meta name="keywords" content="分布式系统,HBase,NoSQL,数据存储">
<meta property="og:type" content="article">
<meta property="og:title" content="HBase 简介">
<meta property="og:url" content="http://yoursite.com/2017/08/29/hbase/index.html">
<meta property="og:site_name" content="HWHuang的博客">
<meta property="og:description" content="什么是HBase​    HBase是一个分布式的、面向列的开源数据库，该技术来源于 Fay Chang 所撰写的Google论文“Bigtable：一个结构化数据的分布式存储系统”。就像Bigtable利用了Google文件系统（File System）所提供的分布式数据存储一样，HBase在Hadoop之上提供了类似于Bigtable的能力。HBase是Apache的Hadoop项目的子项目。">
<meta property="og:image" content="http://yoursite.com/2017/08/29/hbase/b3b7d0a20cf431ad8b01445e4b36acaf2fdd9881.jpg">
<meta property="og:image" content="http://yoursite.com/2017/08/29/hbase/Base基本概念.png">
<meta property="og:image" content="http://yoursite.com/2017/08/29/hbase/HBaseTables.png">
<meta property="og:image" content="http://yoursite.com/2017/08/29/hbase/image002.png">
<meta property="og:image" content="http://yoursite.com/2017/08/29/hbase/image003.png">
<meta property="og:updated_time" content="2017-08-29T11:49:55.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="HBase 简介">
<meta name="twitter:description" content="什么是HBase​    HBase是一个分布式的、面向列的开源数据库，该技术来源于 Fay Chang 所撰写的Google论文“Bigtable：一个结构化数据的分布式存储系统”。就像Bigtable利用了Google文件系统（File System）所提供的分布式数据存储一样，HBase在Hadoop之上提供了类似于Bigtable的能力。HBase是Apache的Hadoop项目的子项目。">
<meta name="twitter:image" content="http://yoursite.com/2017/08/29/hbase/b3b7d0a20cf431ad8b01445e4b36acaf2fdd9881.jpg">
  
    <link rel="alternate" href="/atom.xml" title="HWHuang的博客" type="application/atom+xml">
  
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" integrity="sha384-XdYbMnZ/QjLh6iI4ogqCTaIjrFk87ip+ekIjefZch0Y+PvJ8CDYtEs1ipDmPorQ+" crossorigin="anonymous">

  <link rel="stylesheet" href="/css/styles.css">
  

</head>

<body>
  <nav class="navbar navbar-inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-menu-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="main-menu-navbar">
      <ul class="nav navbar-nav">
        
          <li><a class=""
                 href="/index.html">Home</a></li>
        
          <li><a class=""
                 href="/archives/">Archives</a></li>
        
      </ul>

      <!--
      <ul class="nav navbar-nav navbar-right">
        
          <li><a href="/atom.xml" title="RSS Feed"><i class="fa fa-rss"></i></a></li>
        
      </ul>
      -->
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

  <div class="container">
    <div class="blog-header">
  <h1 class="blog-title">HWHuang的博客</h1>
  
</div>

    <div class="row">
        <div class="col-sm-8 blog-main">
          <article id="post-hbase" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 class="article-title" itemprop="name">
      HBase 简介
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2017/08/29/hbase/" class="article-date"><time datetime="2017-08-29T11:43:13.000Z" itemprop="datePublished">2017-08-29</time></a>
</div>

    
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/大数据/">大数据</a>
  </div>


  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="什么是HBase"><a href="#什么是HBase" class="headerlink" title="什么是HBase"></a>什么是HBase</h2><p>​    HBase是一个分布式的、面向列的开源数据库，该技术来源于 Fay Chang 所撰写的Google论文“Bigtable：一个结构化数据的分布式存储系统”。就像Bigtable利用了Google文件系统（File System）所提供的分布式数据存储一样，HBase在Hadoop之上提供了类似于Bigtable的能力。HBase是Apache的Hadoop项目的子项目。HBase不同于一般的关系数据库，它是一个适合于非结构化数据存储的数据库。另一个不同的是HBase<strong>基于列的而不是基于行</strong>的模式。</p>
<p><img src="/2017/08/29/hbase/b3b7d0a20cf431ad8b01445e4b36acaf2fdd9881.jpg" alt=""></p>
<h2 id="HBase的特点"><a href="#HBase的特点" class="headerlink" title="HBase的特点"></a>HBase的特点</h2><p>HBase有以下特点：</p>
<ol>
<li>大（在一个表中可以有数十亿行，上百万列）</li>
<li>无模式</li>
<li>面向列</li>
<li>稀疏方式存储</li>
<li>数据多版本（每个单元的数据可以有<strong>多个版本</strong>）</li>
<li>数据类型单一（全部是String）</li>
</ol>
<p><em>关于按行存储和按列存储</em><br>​    按行存储，以传统的 RDBMS 为例，为某一个表插入某一条数据时，插入的基本单位是<strong>行</strong>；<br>​    按列存储，为表格插入某一条数据时，插入的基本单位是<strong>列</strong>。<br>HBase 本身可以理解为一个大的 Map ，按照Key和Value来存数据。</p>
<h2 id="HBase的组成"><a href="#HBase的组成" class="headerlink" title="HBase的组成"></a>HBase的组成</h2><p>HBase有以下的基本概念：</p>
<p><img src="/2017/08/29/hbase/Base基本概念.png" alt=""></p>
<ol>
<li>Row Key：<br>本身是一个 <strong>Byte Array</strong> 。作为表中记录的<strong>主键</strong>。</li>
<li>Column Family：<br>有一个字符串名称，含有一个或者多个列。</li>
<li>Column：<br>从属于某一个 Column Family ，列名称是编码在Cell中的；</li>
<li>Version Number：<br>每一个 row Key 的 Version Number 是唯一的；<br>默认值为：<strong>时间戳</strong>；<br>类型：Long</li>
<li>Value<br>以 Byte Array 的形式存储。</li>
</ol>
<p>HBase的结构<br><img src="/2017/08/29/hbase/HBaseTables.png" alt=""></p>
<h2 id="HBase架构"><a href="#HBase架构" class="headerlink" title="HBase架构"></a>HBase架构</h2><p>​    在 HBase 的集群中主要由 Master 和 Region Server 组成，以及 Zookeeper，具体模块如下图所示。</p>
<p><img src="/2017/08/29/hbase/image002.png" alt=""></p>
<p>​    可见，HBase是建立在HDFS上的。</p>
<h3 id="Master"><a href="#Master" class="headerlink" title="Master"></a>Master</h3><p>HBase Master 用于</p>
<ol>
<li><strong>协调</strong>多个 Region Server；</li>
<li><strong>侦测</strong>各个 Region Server 之间的状态；</li>
<li><strong>平衡</strong> Region Server 之间的负载；</li>
<li><strong>分配</strong> Region 给 Region Server；</li>
<li><strong>DDL</strong>操作；<br><u>HBase 允许多个 Master 节点共存</u> ，但是这需要 Zookeeper 的帮助。不过当多个 Master 节点共存时，只有一个 Master 是提供服务的，其他的 Master 节点处于待命的状态。当正在工作的 Master 节点宕机时，其他的 Master 则会接管 HBase 的集群。</li>
</ol>
<h3 id="Region-Server"><a href="#Region-Server" class="headerlink" title="Region Server"></a>Region Server</h3><p>​    对于一个 Region Server 而言，其 ~包括了多个 Region~ 。Region Server 的作用只是<strong>管理表格</strong>，以及实现<strong>读写操作</strong>。Client 直接连接 Region Server，并通信获取 HBase 中的数据。</p>
<h3 id="Region"><a href="#Region" class="headerlink" title="Region"></a>Region</h3><p>​    [image:F70C090E-38E1-4A96-B349-2BCD779FDD49-4784-000046EBEFB38D5B/Region.png]</p>
<p>​    对于 Region 而言，则是真实存放 HBase 数据的地方，也就说 ~Region 是 HBase 可用性和分布式的基本单位~ 。如果当一个表格很大，并由多个 CF 组成时，那么表的数据将存放在多个 Region 之间，并且在每个 Region 中会关联多个存储的单元（Store）。    </p>
<p>​    每个 Region 包含着多个 Store 对象。每个 Store 包含一个 MemStore，和一个或多个 HFile。</p>
<h4 id="ZooKeeper"><a href="#ZooKeeper" class="headerlink" title="ZooKeeper"></a>ZooKeeper</h4><p>​    </p>
<p>​    Zookeeper 是作为 HBase Master 的 HA 解决方案。也就是说，是 Zookeeper 保证了至少有一个 HBase Master 处于运行状态。并且 Zookeeper 负责 Region 和 Region Server 的注册。其实 Zookeeper 发展到目前为止，已经成为了分布式大数据框架中容错性的标准框架。不光是 HBase，几乎所有的分布式大数据相关的开源框架，都依赖于 Zookeeper 实现 HA（High Available）。    </p>
<p>​    HBase Master 与 Region Server 之间的关系是依赖 Zookeeper 来维护的。</p>
<p><a href="https://www.ibm.com/developerworks/cn/analytics/library/ba-cn-bigdata-hbase/index.html" target="_blank" rel="external">HBase 深入浅出</a></p>
<h2 id="HBase的工作流程"><a href="#HBase的工作流程" class="headerlink" title="HBase的工作流程"></a>HBase的工作流程</h2><p><img src="/2017/08/29/hbase/image003.png" alt=""></p>
<p>👉 Client -&gt;   Region Server:</p>
<p>​    当一个 Client 需要访问 HBase 集群时，Client 需要先和 Zookeeper 来通信，然后才会找到对应的 Region Server。</p>
<p>👉  Region Server -&gt; Region:</p>
<p>​    每一个 Region Server 管理着很多个 Region。 ~对于 HBase 来说，Region 是 HBase 并行化的基本单元。~ 因此，数据也都存储在 Region 中。这里我们需要特别注意， ~每一个 Region 都<strong>只存储一个</strong> Column Family 的数据，并且是该 CF 中的一段（按 Row 的区间分成多个 Region）~ 。Region 所能存储的数据大小是有<strong>上限</strong>的，当达到该上限时（Threshold），Region 会进行<strong>分裂</strong>，数据也会分裂到多个 Region 中，这样便可以提高数据的并行化，以及提高数据的容量。每个 Region 包含着多个 Store 对象。每个 Store 包含一个 MemStore，和一个或多个 HFile。MemStore 便是数据在<strong>内存中的实体</strong>，并且一般都是<strong>有序的</strong>。</p>
<p>👉  Region -&gt; HDFS:</p>
<p>​    当数据向 Region 写入的时候，会先写入 MemStore。<br>​    当 MemStore 中的数据需要向底层文件系统倾倒（Dump）时（例如 MemStore 中的数据体积到达 MemStore 配置的最大值），Store 便会创建         StoreFile，而 StoreFile 就是对 HFile 一层封装。<br>​    所以 MemStore 中的数据会最终写入到 HFile 中，也就是磁盘 IO。<br>​    由于 HBase 底层依靠 HDFS，因此 HFile 都存储在 HDFS 之中。</p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/08/29/hbase/" data-id="cj6xjfezl000ftsjo4flfcm27" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HBase/">HBase</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NoSQL/">NoSQL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/分布式系统/">分布式系统</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据存储/">数据存储</a></li></ul>


    </footer>
  </div>
  
    
<ul id="article-nav" class="nav nav-pills nav-justified">
  
  <li role="presentation">
    <a href="/2017/08/18/hiveIntro/" id="article-nav-older" class="article-nav-link-wrap">
      <i class="fa fa-chevron-left pull-left"></i>
      <span class="article-nav-link-title">hive简介</span>
    </a>
  </li>
  
  
  <li role="presentation">
    <a href="/2017/08/29/test-1/" id="article-nav-newer" class="article-nav-link-wrap">
      <span class="article-nav-link-title">test</span>
      <i class="fa fa-chevron-right pull-right"></i>
    </a>
  </li>
  
</ul>


  
</article>




        </div>
        <div class="col-sm-3 col-sm-offset-1 blog-sidebar">
          
  <div class="sidebar-module sidebar-module-inset">
  <h4>About</h4>
  <p></p>

</div>


  
  <div class="sidebar-module">
    <h4>Categories</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/大数据/">大数据</a><span class="sidebar-module-list-count">8</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>Tags</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/HBase/">HBase</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/HDFS/">HDFS</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/MapReduce/">MapReduce</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/NoSQL/">NoSQL</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/代码/">代码</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/分布式系统/">分布式系统</a><span class="sidebar-module-list-count">9</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/数据存储/">数据存储</a><span class="sidebar-module-list-count">1</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>Tag Cloud</h4>
    <p class="tagcloud">
      <a href="/tags/HBase/" style="font-size: 10px;">HBase</a> <a href="/tags/HDFS/" style="font-size: 16.67px;">HDFS</a> <a href="/tags/MapReduce/" style="font-size: 13.33px;">MapReduce</a> <a href="/tags/NoSQL/" style="font-size: 10px;">NoSQL</a> <a href="/tags/代码/" style="font-size: 10px;">代码</a> <a href="/tags/分布式系统/" style="font-size: 20px;">分布式系统</a> <a href="/tags/数据存储/" style="font-size: 10px;">数据存储</a>
    </p>
  </div>


  
  <div class="sidebar-module">
    <h4>Archives</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/08/">August 2017</a><span class="sidebar-module-list-count">12</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>Recents</h4>
    <ul class="sidebar-module-list">
      
        <li>
          <a href="/2017/08/29/test-1/">test</a>
        </li>
      
        <li>
          <a href="/2017/08/29/hbase/">HBase 简介</a>
        </li>
      
        <li>
          <a href="/2017/08/18/hiveIntro/">hive简介</a>
        </li>
      
        <li>
          <a href="/2017/08/16/MyTopKClass/">MyTopKClass</a>
        </li>
      
        <li>
          <a href="/2017/08/15/hadoopMRAdv/">hadoop高级</a>
        </li>
      
    </ul>
  </div>



        </div>
    </div>
  </div>
  <footer class="blog-footer">
  <div class="container">
    <div id="footer-info" class="inner">
      &copy; 2017 H.W.Huang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

  

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>



<script src="/js/script.js"></script>

</body>
</html>
